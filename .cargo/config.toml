[build]
# v0 mangling scheme provides more detailed backtraces around closures
rustflags = ["-C", "symbol-mangling-version=v0", "--cfg", "tokio_unstable"]

[target.'cfg(target_os = "windows")']
rustflags = [
  "-C",
  "target-cpu=native",
  "--cfg",
  "windows_slim_errors",
  "-C",
  "target-feature=+crt-static"
]

[profile.release]
overflow-checks = false
codegen-units = 1
lto = "fat"
opt-level = 2
strip = true
debug = 0
debug-assertions = false
incremental = false
panic = "abort"

# Android NDK configuration - override global mold linker for Android
[target.aarch64-linux-android]
rustflags = ["-C", "link-arg=-fuse-ld=lld"]
[target.armv7-linux-androideabi]
rustflags = ["-C", "link-arg=-fuse-ld=lld"]
